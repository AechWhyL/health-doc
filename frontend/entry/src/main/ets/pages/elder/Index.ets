import { ElderInterventionIndex } from './intervention/ElderInterventionIndex';
import { InterventionPlanDetail } from './intervention/InterventionPlanDetail';
import { TaskCheckInPage } from './intervention/TaskCheckInPage';

@Entry
@Component
struct ElderIndex {
  @Provide('navPathStack') navPathStack: NavPathStack = new NavPathStack();
  @State currentIndex: number = 0;

  @Builder
  PageMap(name: string) {
    if (name === 'InterventionPlanDetail') {
      InterventionPlanDetail()
    } else if (name === 'TaskCheckInPage') {
      TaskCheckInPage()
    }
  }

  @Builder
  TabBuilder(index: number, name: string, icon: string, selectedIcon: string) {
    Column() {
      Text(icon) // è¿™é‡Œå¯ä»¥ç”¨ Imageï¼Œæš‚æ—¶ç”¨ Text æ¨¡æ‹Ÿå›¾æ ‡
        .fontSize(24)
        .fontColor(this.currentIndex === index ? '#007DFF' : '#999')
        .margin({ bottom: 4 })
      Text(name)
        .fontSize(10)
        .fontColor(this.currentIndex === index ? '#007DFF' : '#999')
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
  }

  build() {
    Navigation(this.navPathStack) {
      Tabs({ barPosition: BarPosition.End, index: this.currentIndex }) {
        // é¦–é¡µ Tab (å ä½)
        TabContent() {
          Column() {
            Text('é¦–é¡µåŠŸèƒ½å¼€å‘ä¸­...')
              .fontSize(20)
              .fontColor('#999')
          }
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
        }
        .tabBar(this.TabBuilder(0, 'é¦–é¡µ', 'ğŸ ', 'ğŸ '))

        // å¹²é¢„ Tab
        TabContent() {
          ElderInterventionIndex()
        }
        .tabBar(this.TabBuilder(1, 'å¹²é¢„', 'ğŸ“…', 'ğŸ“…'))

        // æˆ‘çš„ Tab (å ä½)
        TabContent() {
          Column() {
            Text('ä¸ªäººä¸­å¿ƒå¼€å‘ä¸­...')
              .fontSize(20)
              .fontColor('#999')
          }
          .width('100%')
          .height('100%')
          .justifyContent(FlexAlign.Center)
        }
        .tabBar(this.TabBuilder(2, 'æˆ‘çš„', 'ğŸ‘¤', 'ğŸ‘¤'))
      }
      .scrollable(false)
      .onChange((index) => {
        this.currentIndex = index;
      })
    }
    .mode(NavigationMode.Stack)
    .title('å¥åº·å…³æŠ¤ Â· é•¿è¾ˆç‰ˆ')
    .titleMode(NavigationTitleMode.Mini)
    .hideBackButton(true)
    .navDestination(this.PageMap)
  }
}
