---
alwaysApply: false
---

# 健康档案管理模块需求文档

## 功能概述

### 功能描述
健康档案管理模块负责对老年人的动态健康信息进行长期存储与多维整理，包括病史记录、就医记录、检查报告、用药情况等内容，为健康评估、干预计划和多角色协同提供核心数据依据。

### 功能范围
- 病史记录管理（既往重要疾病、慢性病、重大手术等）
- 就医记录管理（门诊、住院、随访等就医事件记录）
- 检查检验报告管理（体检报告、化验单、影像检查等）
- 用药情况管理（用药清单、剂量、频次、依从性记录）
- 健康档案统一视图与时间轴展示

### 依赖关系
- 前置模块:
  - 老人基本信息管理模块：提供老人ID及基础身份信息。
  - 健康数据记录与分析模块：部分持续性指标可在健康档案中进行汇总展示。
- 外部服务:
  - 可接入第三方检查报告解析服务（后续扩展）。
- 数据依赖:
  - 老人基础信息表（elder_basic_info）
  - 相关健康记录表（如 health_records、medications、visits 等，具体表结构在实现阶段细化或复用现有结构）

## 功能需求

### 核心功能列表

| 功能编号 | 功能名称             |
|---------|----------------------|
| F101    | 病史记录管理         |
| F102    | 就医记录管理         |
| F103    | 检查检验报告管理     |
| F104    | 用药情况管理         |
| F105    | 健康档案统一视图展示 |

### 功能详细规格

#### F101: 病史记录管理
**功能描述**:  
记录老人在平台管理范围内的既往主要疾病、慢性病信息，以及重要手术史等，支持后续医护参考与风险评估。

**关键逻辑思路**:
- 在老人维度下维护“病史条目列表”，每条记录包含疾病名称、诊断时间、诊断医院、治疗情况、是否仍在随访等信息。
- 支持新增、编辑、标记为已终止随访（不再活跃）等操作。
- 支持按疾病类型或发生时间排序。

**涉及的业务规则**:
- 对于涉及隐私较高的疾病记录，展示和编辑权限应严格受控（如仅医护和本人可见，家属权限可配置）。
- 删除操作尽量采用“逻辑删除”或版本化方式，便于后续审计与恢复。

#### F102: 就医记录管理
**功能描述**:  
记录老人每一次重要就医事件，帮助医护人员和家属完整回顾就医历史。

**关键逻辑思路**:
- 以“就医事件”为基本单位，每条记录包括：就医类型（门诊/住院/急诊）、就医时间、医院名称、科室、主诊医生、主要诊断、初步建议等。
- 支持附加备注字段，记录补充说明。
- 支持按照时间轴展示，就近显示近期就医记录。

**涉及的业务规则**:
- 就医记录与病史记录可以建立关联（例如某次住院事件与“脑梗死”病史关联）。
- 不同角色的可见字段范围应有所差异（例如隐藏部分敏感诊断给普通家属）。

#### F103: 检查检验报告管理
**功能描述**:  
管理老年人的各类检查检验报告，包括体检报告、化验单、影像检查报告等，以文档形式长期保存和查阅。

**关键逻辑思路**:
- 支持上传报告文件（图片/PDF 等）并录入结构化摘要信息，如检查日期、检查项目、结论、报告医院。
- 可为报告打上标签（如“年度体检”“心电图”“胸片”等），方便分类查找。
- 支持在查看报告时联动显示相关就医记录与病史条目。

**涉及的业务规则**:
- 上传文件大小和格式需受限制，并进行安全校验。
- 报告数据的长期存储需要考虑存储空间与访问频率，必要时可做冷/热分层存储设计。

#### F104: 用药情况管理
**功能描述**:  
记录老人长期或阶段性服用药物的情况，为健康干预和风险评估提供依据。

**关键逻辑思路**:
- 以“用药方案/用药条目”为基本对象，每条记录包含药品名称、剂量、频次、给药途径、开始日期、预计结束日期等。
- 支持对当前正在使用的药物进行标记，并记录停药日期及原因。
- 可记录用药依从性或服药异常情况（如漏服、自行停药）。

**涉及的业务规则**:
- 药品名称建议采用标准化字典（后续可接入药品信息库），减少同一药物多种写法。
- 用药记录在健康干预模块中可被引用，用于生成服药提醒等。

#### F105: 健康档案统一视图展示
**功能描述**:  
为医护人员、老人/家属提供统一的“健康档案视图”，以时间轴或模块化卡片方式展示与老人相关的核心健康事件和记录。

**关键逻辑思路**:
- 在单个老人详情页中，汇总展示病史、就医记录、检查报告、用药记录等信息。
- 支持按时间轴查看：以时间线形式展示健康事件（就医、检查、用药调整等）。
- 支持按类别筛选：例如只看“检查报告”或“用药调整”。

**涉及的业务规则**:
- 不同角色看到的视图内容可不同：老人/家属以简化展示为主，医护端展示更多专业信息。
- 健康档案视图应与版本追踪模块对接，支持查看某一时间点的档案状态。

## 前端交互设计

### 交互流程（概要）
- 医护端：
  - 进入老人列表 → 选择老人 → 打开“健康档案”页签 → 按类型查看和编辑各类记录。
- 老人端/家属端：
  - 进入“我的健康档案” → 以时间轴方式浏览 → 点击事件卡片查看详情。

## 数据模型

### 数据库设计
在实现阶段，应优先复用或扩展现有健康记录相关表结构（如 health_records、visits、medications 等）。若现有表不满足需求，再根据实际情况新增专用表。

#### 表结构设计（示例）

##### health_visit_records
| 字段名        | 数据类型 | 说明             |
|---------------|----------|------------------|
| id            | BIGINT   | 主键             |
| elder_id      | BIGINT   | 关联老人ID       |
| visit_type    | TINYINT  | 就医类型         |
| visit_date    | DATETIME | 就医时间         |
| hospital_name | VARCHAR  | 医院名称         |
| department    | VARCHAR  | 科室             |
| diagnosis     | TEXT     | 主要诊断         |

##### health_examination_reports
| 字段名        | 数据类型 | 说明             |
|---------------|----------|------------------|
| id            | BIGINT   | 主键             |
| elder_id      | BIGINT   | 关联老人ID       |
| exam_date     | DATETIME | 检查日期         |
| exam_type     | VARCHAR  | 检查类型         |
| conclusion    | TEXT     | 检查结论         |
| file_url      | VARCHAR  | 报告文件存储地址 |

## 接口设计

### API 概览

#### 健康记录相关API

| 接口路径                                              | 方法   | 处理问题                                       | 权限要求         |
|-------------------------------------------------------|--------|------------------------------------------------|------------------|
| GET /api/v1/elder-health/health-record/list           | GET    | 分页查询健康记录列表，支持按老人ID、分类、日期范围筛选 | 医护/本人/家属   |
| GET /api/v1/elder-health/health-record/{id}           | GET    | 查看单条健康记录详情                           | 医护/本人/家属   |
| POST /api/v1/elder-health/health-record               | POST   | 新增健康记录（病史、就医记录、检查报告等分类） | 医护             |
| PUT /api/v1/elder-health/health-record/{id}           | PUT    | 更新健康记录                                   | 医护             |
| DELETE /api/v1/elder-health/health-record/{id}        | DELETE | 删除健康记录                                   | 医护             |
| GET /api/v1/elder-health/elder/{elder_id}/health-records | GET | 按老人ID查询该老人的所有健康记录               | 医护/本人/家属   |

#### 用药情况相关API

| 接口路径                                              | 方法   | 处理问题                                       | 权限要求         |
|-------------------------------------------------------|--------|------------------------------------------------|------------------|
| GET /api/v1/elder-health/medication/list              | GET    | 分页查询用药记录列表，支持按老人ID、药品名称、日期范围筛选 | 医护/本人/家属   |
| GET /api/v1/elder-health/medication/{id}              | GET    | 查看单条用药记录详情                           | 医护/本人/家属   |
| POST /api/v1/elder-health/medication                  | POST   | 新增用药记录                                   | 医护             |
| PUT /api/v1/elder-health/medication/{id}              | PUT    | 更新用药记录                                   | 医护             |
| DELETE /api/v1/elder-health/medication/{id}           | DELETE | 删除用药记录                                   | 医护             |
| GET /api/v1/elder-health/elder/{elder_id}/medications | GET    | 按老人ID查询该老人的所有用药记录               | 医护/本人/家属   |

#### 过敏史相关API

| 接口路径                                              | 方法   | 处理问题                                       | 权限要求         |
|-------------------------------------------------------|--------|------------------------------------------------|------------------|
| GET /api/v1/elder-health/allergy/list                 | GET    | 分页查询过敏史记录列表，支持按老人ID、过敏物品名称筛选 | 医护/本人/家属   |
| GET /api/v1/elder-health/allergy/{id}                 | GET    | 查看单条过敏史记录详情                         | 医护/本人/家属   |
| POST /api/v1/elder-health/allergy                     | POST   | 新增过敏史记录                                 | 医护             |
| PUT /api/v1/elder-health/allergy/{id}                 | PUT    | 更新过敏史记录                                 | 医护             |
| DELETE /api/v1/elder-health/allergy/{id}              | DELETE | 删除过敏史记录                                 | 医护             |
| GET /api/v1/elder-health/elder/{elder_id}/allergies   | GET    | 按老人ID查询该老人的所有过敏史记录             | 医护/本人/家属   |

详细的请求参数和响应格式参考 Swagger 文档。

## 架构设计
健康档案管理模块将与健康数据记录模块、干预计划模块形成联动：  
健康档案作为“纵向历史记录”，健康数据记录作为“横向指标数据”，干预计划模块则根据档案和指标制定干预策略。

## 关键技术点
1. 多表联合查询与分页（按老人ID聚合多类记录）。
2. 报告文件的上传、存储和访问控制。
3. 不同角色的视图权限控制与字段脱敏。

## 性能优化策略
- 针对按老人ID查询的场景，对相关表 elder_id 字段建立索引。
- 对时间轴视图采用分页或“向上滚动加载更多”的形式，避免一次加载过多历史记录。

---
